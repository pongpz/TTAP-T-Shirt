<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>TTAP T-SHIRT</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
  <link rel="shortcut icon" type="image/png"
        th:href="@{/images/logo2tap.jpg}" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;900&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link th:href="@{/customercss/bootstrap.min.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/elegant-icons.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/nice-select.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/jquery-ui.min.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/owl.carousel.min.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/slicknav.min.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/style.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/style-customer.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/customercss/cart-hover.css}" rel="stylesheet" type="text/css" />
  <style>
    h1, h3 {
      margin-bottom: 20px;
    }
    table {
      background-color: #fff;
      border-radius: 5px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    table th, table td {
      text-align: center;
    }
    .btn-primary {
      background-color: #007bff;
      border-color: #007bff;
    }
    footer {
      background-color: #343a40;
      color: #fff;
      padding: 20px 0;
    }
  </style>
</head>
<body>
<header th:replace="~{/fragment/header-customer :: header-customer}"></header>

<section>
  <div class="container">
    <h1>Hóa đơn của bạn</h1>
    <p><strong>Mã hóa đơn:</strong> <span th:text="${hoaDon.ma}"></span></p>
    <p><strong>Tên người nhận:</strong> <span th:text="${hoaDon.tenNguoiNhan}"></span></p>
    <p><strong>Số điện thoại:</strong> <span th:text="${hoaDon.sdtNguoiNhan}"></span></p>
    <p><strong>Địa chỉ giao hàng:</strong> <span th:text="${hoaDon.diaChiGiaoHang}"></span></p>
    <p><strong>Ngày tạo:</strong> <span th:text="${hoaDon.ngayTao}"></span></p>
    <p><strong>Tổng tiền:</strong> <span th:text="${hoaDon.tongTien}"></span> VND</p>
    <a th:href="@{/TTAP/cart/hoa-don-chi-tiet/hien-thi(id=${hoaDon.id})}" class="btn btn-info">Chi tiết</a>

    <h2>Chi tiết sản phẩm</h2>
    <table class="table table-bordered table-hover">
      <thead class="table-primary">
      <tr>
        <th>Tên sản phẩm</th>
        <th>Giá</th>
        <th>Số lượng</th>
        <th>Thành tiền</th>
        <th>Hành động</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="chiTiet : ${listHDCT}">
        <td th:text="${chiTiet.chiTietSanPham.sanPham.ten}"></td>
        <td th:text="${chiTiet.donGia != null ? chiTiet.donGia : 'Không có'}"></td>
        <td th:text="${chiTiet.soLuong != null ? chiTiet.donGia : 'Không có'}"></td>
        <td th:text="${chiTiet.donGia  * chiTiet.soLuong}"></td>
      </tr>
      </tbody>
    </table>

    <a href="/TTAP/cart/view">Quay lại giỏ hàng</a>
  </div>
</section>


<!--<script>-->
<!--  function calculateTotal() {-->
<!--    let checkboxes = document.querySelectorAll('.product-checkbox');-->
<!--    let total = 0;-->

<!--    // Lọc những sản phẩm được chọn-->
<!--    let selectedProductIds = [];-->
<!--    checkboxes.forEach(checkbox => {-->
<!--      if (checkbox.checked) {-->
<!--        selectedProductIds.push(checkbox.value);-->
<!--        let row = checkbox.closest('tr');-->
<!--        let amount = parseFloat(row.querySelector('td:nth-child(6)').textContent.replace(/,/g, ''));-->
<!--        total += amount;-->
<!--      }-->
<!--    });-->

<!--    // Cập nhật tổng tiền-->
<!--    document.getElementById('totalAmount').textContent = new Intl.NumberFormat('vi-VN').format(total);-->

<!--    // Gửi danh sách các sản phẩm đã chọn tới backend-->
<!--    let inputSelectedProductIds = document.createElement('input');-->
<!--    inputSelectedProductIds.type = 'hidden';-->
<!--    inputSelectedProductIds.name = 'selectedProductIds';-->
<!--    inputSelectedProductIds.value = selectedProductIds.join(',');-->
<!--    document.getElementById('cartForm').appendChild(inputSelectedProductIds);-->
<!--  }-->
<!--</script>-->

<footer th:replace="~{/fragment/footer-customer :: footer-customer}" class="text-center">
  <p>&copy; 2024 TTAP T-SHIRT. All rights reserved.</p>
</footer>
</body>
</html>
