<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8"/>
    <title>TTAP T-SHIRT</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>
    <link rel="shortcut icon" type="image/png"
          th:href="@{/images/logo2tap.jpg}"/>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;900&display=swap" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
          integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link th:href="@{/customercss/bootstrap.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/elegant-icons.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/nice-select.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/jquery-ui.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/owl.carousel.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/slicknav.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/style.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/style-customer.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/customercss/cart-hover.css}" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="/customcss/toastMessage.css ">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet"
          type="text/css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        h1, h3 {
            margin-bottom: 20px;
        }

        table {
            background-color: #fff;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        table th, table td {
            text-align: center;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        footer {
            background-color: #343a40;
            color: #fff;
            padding: 20px 0;
        }
    </style>
</head>
<body>
<header th:replace="~{/fragment/header-customer :: header-customer}"></header>
<div id="toast-root"></div>
<section>
    <div class="cart-content-2021">
        <div class="cart-content-2021-left">
            <div class="container my-4">
                <form th:action="@{/TTAP/cart/checkout}" method="post" onsubmit="return validateCartSelection()">

                    <div class="card mb-4">
                        <div class="card-header d-flex align-items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-geo-alt me-2" viewBox="0 0 16 16">
                                <path d="M12.166 8.94c0 1.126-2.614 4.385-3.675 5.69a.866.866 0 0 1-1.312 0C6.112 13.325 3.5 10.066 3.5 8.94 3.5 6.614 5.22 5 8 5s4.5 1.614 4.5 3.94zm-.966-.94c0-1.29-1.267-2.4-3.2-2.4s-3.2 1.11-3.2 2.4c0 .844.9 2.32 3.2 4.792 2.3-2.472 3.2-3.948 3.2-4.792z"/>
                                <path d="M8 8.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                            </svg>
                            <h5 class="mb-0">Địa chỉ nhận hàng</h5>
                        </div>
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-10">
                                    <p class="fw-bold mb-1" th:text="${userLogged.hoTen}"></p>
                                    <p class="fw-bold mb-1" th:text="${userLogged.soDienthoai}"></p>
                                    <div th:if="${selectedAddress == null }">
                                        <p>Chưa có địa chỉ nào. Hãy thêm địa chỉ mới.</p>
                                    </div>
                                    <div th:if="${selectedAddress != null}">
                                        <p class="mb-1" th:text="${selectedAddress.soNha} + ' ' + ${selectedAddress.tenDuong}
                                + ', ' + ${selectedAddress.tenQuanhuyen} + ', ' + ${selectedAddress.tenThanhpho}"></p>
                                        <input type="hidden" name="diaChi" th:value="${selectedAddress.soNha} + ' '
                                + ${selectedAddress.tenDuong} + ', ' + ${selectedAddress.tenQuanhuyen} + ', ' + ${selectedAddress.tenThanhpho}">
                                    </div>


                                </div>
                                <div class="col-md-2 text-end">
                                    <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal"
                                            data-bs-target="#selectAddressModal">Thay đổi
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Cart Items Section -->
                        <div class="col-md-9">
                            <div class="d-flex border-bottom pb-4">
                                <div class="col-md-4 d-flex align-items-center">
                                    <input type="checkbox" class="form-check-input me-2" id="selectAll"
                                           onchange="toggleSelectAll(this)">
                                    <span>Tất cả (sản phẩm)</span>
                                </div>
                                <div class="col-md-2 text-center fw-bold">Đơn giá</div>
                                <div class="col-md-2 text-center fw-bold">Số lượng</div>
                                <div class="col-md-2 text-center fw-bold">Thành tiền</div>

                            </div>

                            <div class="mt-3">
                                <!-- Single Item Row -->
                                <div class="row align-items-center border-bottom py-2 js-item-row"
                                     th:each="item, iterStat : ${cart.items}">
                                    <!-- Checkbox và Hình ảnh sản phẩm -->
                                    <div class="col-6 col-md-4 d-flex align-items-center px-1">
                                        <input type="checkbox"
                                               name="selectedProductIds" th:value="${item.id}"
                                               class="product-checkbox" onchange="calculateTotal()">
                                        <img th:src="${productImages[item.chiTietSanPham.sanPham.id]}"
                                             alt="Product Image"
                                             class="img-thumbnail me-3"
                                             style="width: 80px; height: 80px; object-fit: contain;">
                                        <div>
                                            <p class="text-dark fw-bold"
                                               th:text="${item.chiTietSanPham.sanPham.ten}"></p>
                                            <p class="small text-muted mb-1">Mã SP: <b
                                                    th:text="${item.chiTietSanPham.sanPham.ma}"></b></p>
                                            <p class="small text-success"
                                               th:text="${item.chiTietSanPham.mauSac.ten}"></p>
                                            <p class="small text-success"
                                               th:text="${item.chiTietSanPham.kichCo.ten}"></p>
                                            <p class="small text-success"
                                               th:text="${item.chiTietSanPham.kichCo.ten}"></p>
                                        </div>
                                    </div>

                                    <!-- Giá sản phẩm -->
                                    <div class="col-4 col-md-2 text-center px-1">
                                      <span class="fw-normal product-price"
                                            th:id="'originPrice_' + ${item.id}"
                                            th:text="${numberUtils.formatCurrency(item.gia)}"
                                            th:attr="data-price=${item.gia}"></span>
                                    </div>

                                    <!-- Số lượng sản phẩm -->
                                    <div class="col-4 col-md-2 text-center px-1">
                                        <div class="d-flex align-items-center justify-content-center">
                                            <button type="button" class="btn btn-sm btn-outline-secondary btn-quantity"
                                                    th:data-id="${item.id}" onclick="updateQuantity(this, 'minus')"
                                                    >-
                                            </button>
                                            <input class="form-control form-control-sm text-center mx-2 quantity-input"
                                                   style="width: 50px;"
                                                   type="number" name="quantity" readonly
                                                   th:id="'quantityInput_' + ${item.id}"
                                                   th:value="${item.soLuong}"
                                                   th:attr="data-id=${item.id},data-max-quantity=${item.chiTietSanPham.soLuong}" min="1"
                                                   oninput="validateQuantity(this)"
                                            >
                                            <button type="button" class="btn btn-sm btn-outline-secondary btn-quantity"
                                                    th:data-id="${item.id}" onclick="updateQuantity(this, 'plus')"
                                                    >+
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Thành tiền -->
                                    <div class="col-4 col-md-2 text-center px-1">
                                 <span class="fw-bold text-danger product-amount"
                                       th:id="'totalPrice_' + ${item.id}"
                                       th:attr="data-total=${item.gia * item.soLuong}"
                                       th:text="${numberUtils.formatCurrency(item.gia * item.soLuong)}"></span>
                                    </div>

                                    <!-- Nút xóa sản phẩm -->
                                    <div class="col-4 col-md-2 text-center px-1">
                                        <a th:href="@{/TTAP/cart/remove(productId=${item.id})}"
                                           class="btn btn-danger btn-sm" onclick="return confirm('Bạn có chắc chắn muốn xóa sản phẩm này này?');">
                                            <i class="bi bi-trash"></i> Xóa
                                        </a>
                                    </div>
                                </div>
                                <!-- End Single Item Row -->
                            </div>
                        </div>
                        <!-- Cart Summary Section -->
                        <div class="col-md-3">
                            <div class="p-3 border rounded">
                                <div class="border-top pt-3">
                                    <p class="d-flex justify-content-between mb-2">
                                        <span>Tạm tính</span>
                                        <span class="total-cart-price" id="totalAmount">0₫</span>
                                    </p>
                                    <p class="d-flex justify-content-between mb-2">
                                        <span>Phí vận chuyển</span>
                                        <span class="shipping-fee" id="shippingFee">0₫</span>
                                    </p>
                                    <p class="d-flex justify-content-between fw-bold mb-2">
                                        <span>Thành tiền</span>
                                        <span class="text-danger total-cart-payment"
                                              id="total-cart-payment">0₫</span>
                                    </p>
                                    <small class="text-muted">(Đã bao gồm VAT nếu có)</small>
                                </div>
                                <button class="btn btn-success w-100 mt-3" type="submit" onclick="return confirmCreateOrder()">Tiến hành đặt hàng</button>
                            </div>
                        </div>
                    </div>

                </form>
                <!-- Địa chỉ nhận hàng -->
            </div>
        </div>
    </div>
    <div class="alert alert-danger text-center" role="alert" th:if="${cart.items == null or cart.items.isEmpty()}">
        <p>Giỏ hàng của bạn đang trống.</p>
    </div>
    <div class="modal fade" id="selectAddressModal" tabindex="-1" aria-labelledby="selectAddressModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="selectAddressModalLabel">Chọn Địa Chỉ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Kiểm tra danh sách địa chỉ -->
                    <div th:if="${addresses != null && !addresses.isEmpty()}">
                        <!-- Form chọn địa chỉ -->
                        <form id="addressForm" th:action="@{/TTAP/cart/updateAddress}" method="post">
                            <div th:each="address, iterStat : ${addresses}" class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="addressId"
                                           th:id="'address' + ${iterStat.index}" th:value="${address.id}"
                                           th:checked="${selectedAddress != null and selectedAddress.id == address.id}">
                                    <label class="form-check-label" th:for="'address' + ${iterStat.index}"
                                           th:text="${address.soNha} + ' , ' + ${address.tenDuong} + ' , ' + ${address.tenQuanhuyen} + ' , ' + ${address.tenThanhpho}"></label>
                                </div>
                            </div>
                            <!-- Nút submit trong form -->
                            <div class="mt-3">
                                <button type="submit" class="btn btn-primary">Chọn Địa Chỉ</button>
                            </div>
                        </form>
                    </div>
                    <!-- Thông báo nếu không có địa chỉ -->
                    <div th:if="${addresses == null || addresses.isEmpty()}">
                        <p>Chưa có địa chỉ nào. Hãy thêm địa chỉ mới.</p>
                    </div>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                            data-bs-target="#createAddressModal">
                        Thêm Địa Chỉ
                    </button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Huỷ</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="createAddressModal" tabindex="-1" aria-labelledby="createAddressModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createAddressModalLabel">Tạo Địa Chỉ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Form nhập địa chỉ -->
                    <form th:action="@{/TTAP/user/address}" method="post" th:object="${address}" onsubmit="return validateAddressForm()">
                        <div class="mb-3">
                            <label for="soNha" class="form-label">Số nhà</label>
                            <input type="text" class="form-control" id="soNha" th:field="*{soNha}" required>
                            <div class="invalid-feedback"></div> <!-- Hiển thị lỗi -->
                        </div>

                        <div class="mb-3">
                            <label for="tenDuong" class="form-label">Tên đường</label>
                            <input type="text" class="form-control" id="tenDuong" th:field="*{tenDuong}" required>
                            <div class="invalid-feedback"></div> <!-- Hiển thị lỗi -->
                        </div>

                        <div class="mb-3">
                            <label for="tenQuanhuyen" class="form-label">Tên quận/huyện</label>
                            <input type="text" class="form-control" id="tenQuanhuyen" th:field="*{tenQuanhuyen}" required>
                            <div class="invalid-feedback"></div> <!-- Hiển thị lỗi -->
                        </div>

                        <div class="mb-3">
                            <label for="tenThanhpho" class="form-label">Tên thành phố</label>
                            <input type="text" class="form-control" id="tenThanhpho" th:field="*{tenThanhpho}" required>
                            <div class="invalid-feedback"></div> <!-- Hiển thị lỗi -->
                        </div>

                        <button type="submit" class="btn btn-primary">Tạo Địa Chỉ</button>
                    </form>

                </div>
            </div>
        </div>
    </div>

</section>


<script>
    function validateAddressForm() {
        const fields = ['soNha', 'tenDuong', 'tenQuanhuyen', 'tenThanhpho'];
        let isValid = true;

        fields.forEach(field => {
            const input = document.getElementById(field);
            const value = input.value.trim(); // Loại bỏ khoảng trắng dư thừa

            // Kiểm tra xem trường có để trống không
            if (!value) {
                isValid = false;
                input.classList.add('is-invalid'); // Thêm lớp hiển thị lỗi
                input.nextElementSibling.textContent = 'Trường này không được để trống.';
            } else {
                input.classList.remove('is-invalid'); // Loại bỏ lớp lỗi nếu hợp lệ
                input.nextElementSibling.textContent = '';
            }
        });

        return isValid; // Ngăn submit nếu không hợp lệ
    }

    function validateCartSelection() {
        // Lấy danh sách các checkbox sản phẩm
        const checkboxes = document.querySelectorAll('.product-checkbox');
        let isProductSelected = false;

        // Kiểm tra xem có sản phẩm nào được chọn không
        checkboxes.forEach(checkbox => {
            if (checkbox.checked) {
                isProductSelected = true;
            }
        });

        // Nếu không có sản phẩm nào được chọn, hiển thị thông báo lỗi
        if (!isProductSelected) {
            alert("Vui lòng chọn ít nhất một sản phẩm để tiến hành đặt hàng.");
            return false; // Ngăn chặn việc gửi form
        }

        const selectedAddress = document.querySelector('input[name="diaChi"]');
        if (!selectedAddress || selectedAddress.value.trim() === "") {
            alert("Vui lòng chọn hoặc nhập địa chỉ giao hàng.");
            return false; // Ngăn chặn việc gửi form
        }

        return confirm('Bạn có chắc chắn muốn đặt hàng không?'); // Cho phép gửi form
    }
</script>
<script>
    // Khi modal "createAddressModal" đóng lại
    const createAddressModal = document.getElementById('createAddressModal');
    const selectAddressModal = new bootstrap.Modal(document.getElementById('selectAddressModal'));

    createAddressModal.addEventListener('hidden.bs.modal', function () {
        // Tự động mở lại modal "selectAddressModal"
        selectAddressModal.show();
    });
</script>
<script>
    function validateQuantity(input) {
        const currentQuantity = parseInt(input.value, 10);
        const maxQuantity = parseInt(input.getAttribute('data-max-quantity'), 10);

        if (currentQuantity > maxQuantity) {
            alert(`Số lượng không thể vượt quá ${maxQuantity}`);
            input.value = maxQuantity;
        } else if (currentQuantity < 1) {
            alert("Số lượng không thể nhỏ hơn 1");
            input.value = 1;
        }

        // Gọi hàm tính lại tổng tiền nếu cần
        calculateTotal();
    }

    function toggleSelectAll(selectAllCheckbox) {
        var checkboxes = document.querySelectorAll('.product-checkbox');
        checkboxes.forEach(function (checkbox) {
            checkbox.checked = selectAllCheckbox.checked;
        });
        calculateTotal(); // Cập nhật tổng tiền mỗi khi thay đổi trạng thái của "Select All"
    }

    function calculateTotal() {
        const checkboxes = document.querySelectorAll('.product-checkbox:checked');
        let total = 0;
        const shippingFee = 50000;
        const selectedProductIds = [];

        checkboxes.forEach(checkbox => {
            const productRow = checkbox.closest('.js-item-row');
            const priceElement = productRow.querySelector('.product-amount');

            // Lấy giá trị từ data-total
            const price = parseFloat(priceElement.getAttribute('data-total') || 0);

            total += price;
            selectedProductIds.push(checkbox.value);
        });

        // Cập nhật tổng tiền
        const totalAmountElement = document.getElementById('totalAmount');
        totalAmountElement.textContent = formatCurrency(total);

        // Kiểm tra nếu có sản phẩm được chọn thì hiển thị phí vận chuyển và tính tổng tiền
        const shippingFeeElement = document.getElementById('shippingFee');
        const totalPaymentElement = document.getElementById('total-cart-payment');

        if (checkboxes.length > 0) {
            // Hiển thị phí vận chuyển
            shippingFeeElement.textContent = formatCurrency(shippingFee);

            // Cập nhật thành tiền (tổng tiền + phí vận chuyển)
            const finalAmount = total + shippingFee;
            totalPaymentElement.textContent = formatCurrency(finalAmount);
        } else {
            // Nếu không có sản phẩm nào được chọn, ẩn phí vận chuyển và tổng tiền
            shippingFeeElement.textContent = formatCurrency(0);
            totalPaymentElement.textContent = formatCurrency(0);
        }

        // Hiển thị danh sách ID sản phẩm đã chọn (nếu cần thiết)
        console.log("Selected Product IDs:", selectedProductIds.join(','));
    }

    // Lắng nghe sự kiện thay đổi checkbox
    document.querySelectorAll('.product-checkbox').forEach(checkbox => {
        checkbox.addEventListener('change', calculateTotal);
    });


    function updateQuantity(button, action) {
        // Lấy ID sản phẩm và giá trị hiện tại của số lượng
        const productId = $(button).data('id');
        const quantityInput = $('#quantityInput_' + productId);
        let currentQuantity = parseInt(quantityInput.val());
        // Lấy số lượng tồn từ input
        const maxQuantity = parseInt(quantityInput.data('max-quantity') || 0);

        // Cập nhật số lượng sản phẩm
        if (action === 'minus' && currentQuantity > 1) {
            currentQuantity--;
        } else if (action === 'plus' && currentQuantity < maxQuantity) {
            currentQuantity++;
        } else if (action === 'plus' && currentQuantity >= maxQuantity) {
            alert(`Số lượng không thể vượt quá ${maxQuantity}`);
            return;
        }

        // Cập nhật lại giá trị số lượng trong input
        quantityInput.val(currentQuantity);

        // Lấy giá trị đơn giá từ data-price
        const unitPrice = parseFloat($('#originPrice_' + productId).data('price') || 0);

        // Tính thành tiền mới
        const newTotal = unitPrice * currentQuantity;

        // Cập nhật lại giá trị thành tiền và data-total
        const totalPriceElement = $('#totalPrice_' + productId);
        totalPriceElement.text(formatCurrency(newTotal));
        totalPriceElement.attr('data-total', newTotal); // Đảm bảo cập nhật thuộc tính data-total

        // Gửi yêu cầu AJAX để lưu thay đổi vào cơ sở dữ liệu
        $.ajax({
            url: '/TTAP/cart/updateProductQuantity',
            type: 'POST',
            data: {
                productId: productId,
                newQuantity: currentQuantity
            },
            success: function (response) {
                console.log('Cập nhật số lượng thành công:', response);
                // Gọi lại hàm calculateTotal() để tính tổng sau khi cập nhật thành công
                calculateTotal();
            },
            error: function (xhr, status, error) {
                const errorMessage = xhr.responseJSON ? xhr.responseJSON.error : 'Có lỗi xảy ra';
                alert(errorMessage);
            }
        });
    }

    function formatCurrency(value) {
        // Sử dụng Intl.NumberFormat để định dạng theo kiểu Việt Nam
        const formatter = new Intl.NumberFormat('vi-VN', {
            style: 'decimal',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        });
        return formatter.format(value) + " đ"; // Thêm "đ" vào cuối
    }
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:src="@{/js/banhang.js}"></script>
<script src="/js/toastMessage.js"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    var removemessage = [[${removemessage}]];
    console.log(removemessage);  // Debugging line to ensure the attribute is set
    if (removemessage) {
        toastSuccess('Thành Công!', 'Sản phẩm đã được xóa khỏi giỏ hàng!');
    }
    /*]]>*/
</script>

<script th:inline="javascript">
    /*<![CDATA[*/
    var message = [[${message}]];
    console.log(message);  // Debugging line to ensure the attribute is set
    if (message) {
        toastSuccess('Thành Công!', 'Đơn hàng đã đặt thành công');
    }
    /*]]>*/
</script>

<script th:inline="javascript">
    /*<![CDATA[*/
    /* Check if the deleteSuccess attribute is present in the model */
    var addressNullError = [[${addressNullError}]];
    if (addressNullError) {
        toastError('Lỗi !', 'Địa chỉ của bạn không hợp lệ!');
    }
    /*]]>*/
</script>

<script th:inline="javascript">
    /*<![CDATA[*/
    /* Check if the deleteSuccess attribute is present in the model */
    var successDcMessage = [[${successDcMessage}]];
    if (successDcMessage) {
        toastSuccess('Thành công', 'Địa chỉ của bạn đã được chọn');
    }
    /*]]>*/
</script>
<script th:inline="javascript">
    /*<![CDATA[*/
    /* Check if the deleteSuccess attribute is present in the model */
    var successAddress= [[${successAddress}]];
    if (successAddress) {
        toastSuccess('Thành công', 'Địa chỉ của bạn đã được thêm ');
    }
    /*]]>*/
</script>
<footer th:replace="~{/fragment/footer-customer :: footer-customer}" class="text-center">
    <p>&copy; 2024 TTAP T-SHIRT. All rights reserved.</p>
</footer>
</body>
</html>
